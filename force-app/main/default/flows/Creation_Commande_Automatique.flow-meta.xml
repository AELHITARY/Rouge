<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Create_OrderItem_QuoteLine_Map</name>
        <label>Create OrderItem QuoteLine Map</label>
        <locationX>1243</locationX>
        <locationY>1254</locationY>
        <actionName>IV_CreateFlowMapRecord</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>For_each_OrderLineItem_OPT</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>T__records</typeName>
            <typeValue>OrderItem</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>records</name>
            <value>
                <elementReference>OrderLineItemList</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>keyField</name>
            <value>
                <stringValue>QuoteLineItemId</stringValue>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Create_Product_Map</name>
        <label>Create Product Map</label>
        <locationX>1036</locationX>
        <locationY>1084</locationY>
        <actionName>IV_CreateFlowMapRecord</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>For_each_Option</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>T__records</typeName>
            <typeValue>PricebookEntry</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>records</name>
            <value>
                <elementReference>Get_All_Product</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>keyField</name>
            <value>
                <stringValue>ProductCode</stringValue>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Create_QuoteLineItem_Map</name>
        <label>Create QuoteLineItem Map</label>
        <locationX>833</locationX>
        <locationY>502</locationY>
        <actionName>IV_CreateFlowMapRecord</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>For_each_QuoteLineItem</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>T__records</typeName>
            <typeValue>QuoteLineItem</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>records</name>
            <value>
                <elementReference>QuoteLineItemList</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>keyField</name>
            <value>
                <stringValue>Id</stringValue>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Create_Referencial_Map</name>
        <label>Create Referencial Map</label>
        <locationX>1620</locationX>
        <locationY>226</locationY>
        <actionName>IV_CreateFlowMapRecord</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_Referencial_Source</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>T__records</typeName>
            <typeValue>Referencial__c</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>records</name>
            <value>
                <elementReference>ReferencialList</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>keyField</name>
            <value>
                <stringValue>Name</stringValue>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Get_All_Options</name>
        <label>Get All Options</label>
        <locationX>719</locationX>
        <locationY>706</locationY>
        <actionName>IV_FlowINClauseActionClass</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Loop_On_All_option</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>U__records</typeName>
            <typeValue>Option__c</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>filteringValuesCollection</name>
            <value>
                <elementReference>QLI_ID_List</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>objectApiName</name>
            <value>
                <stringValue>Option__c</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>fieldsToQuery</name>
            <value>
                <stringValue>Id, ligneDevis__c, Libelleoption__c, Codeoption__c, PrixunitaireHT__c, Quantite__c, Categorie__c, PrixHT__c</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>filterField</name>
            <value>
                <stringValue>ligneDevis__c</stringValue>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>OptionList</assignToReference>
            <name>records</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Get_All_RecordType</name>
        <label>Get All RecordType</label>
        <locationX>845</locationX>
        <locationY>305</locationY>
        <actionName>IV_FlowINClauseActionClass</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>For_each_RecordType</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>U__records</typeName>
            <typeValue>RecordType</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>filteringValuesCollection</name>
            <value>
                <elementReference>RecordTypeNameFilters</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>objectApiName</name>
            <value>
                <stringValue>RecordType</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>fieldsToQuery</name>
            <value>
                <stringValue>Id, Name, DeveloperName, SobjectType</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>filterField</name>
            <value>
                <stringValue>DeveloperName</stringValue>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>RecordTypesList</assignToReference>
            <name>records</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <description>Appel au code APEX pour récupérer les enregistrements du référentiel</description>
        <name>Get_All_Referencial</name>
        <label>Get All Referencial</label>
        <locationX>1520</locationX>
        <locationY>336</locationY>
        <actionName>IV_FlowINClauseActionClass</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Create_Referencial_Map</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>U__records</typeName>
            <typeValue>Referencial__c</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>filteringValuesCollection</name>
            <value>
                <elementReference>ReferencialListName</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>objectApiName</name>
            <value>
                <stringValue>Referencial__c</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>fieldsToQuery</name>
            <value>
                <stringValue>Id, Name</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>filterField</name>
            <value>
                <stringValue>Name</stringValue>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>ReferencialList</assignToReference>
            <name>records</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Get_OrderItemParent</name>
        <label>Get OrderItemParent</label>
        <locationX>1646</locationX>
        <locationY>1139</locationY>
        <actionName>IV_GetValueFromMapRecord</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Define_OLI_Parent</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>U__outputValue</typeName>
            <typeValue>OrderItem</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>key</name>
            <value>
                <elementReference>OrderLineItem_OPT.QuoteLineItemId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>flowMap</name>
            <value>
                <elementReference>Create_OrderItem_QuoteLine_Map.flowMap</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Get_Product_OPT</name>
        <label>Get Product OPT</label>
        <locationX>649</locationX>
        <locationY>1110</locationY>
        <actionName>IV_GetValueFromMapRecord</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Create_OrderLineItem_OPT</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>U__outputValue</typeName>
            <typeValue>PricebookEntry</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>key</name>
            <value>
                <elementReference>Option.Codeoption__c</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>flowMap</name>
            <value>
                <elementReference>Create_Product_Map.flowMap</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Get_QuoteLineItem</name>
        <label>Get QuoteLineItem</label>
        <locationX>806</locationX>
        <locationY>1110</locationY>
        <actionName>IV_GetValueFromMapRecord</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_Product_OPT</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>U__outputValue</typeName>
            <typeValue>QuoteLineItem</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>key</name>
            <value>
                <elementReference>Option.ligneDevis__c</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>flowMap</name>
            <value>
                <elementReference>Create_QuoteLineItem_Map.flowMap</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Get_Referencial_FinancingMethod</name>
        <label>Get Referencial FinancingMethod</label>
        <locationX>1959</locationX>
        <locationY>98</locationY>
        <actionName>IV_GetValueFromMapRecord</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Set_FinancingMethod</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>U__outputValue</typeName>
            <typeValue>Referencial__c</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>key</name>
            <value>
                <elementReference>Quote.modeFinancement__c</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>flowMap</name>
            <value>
                <elementReference>Create_Referencial_Map.flowMap</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Get_Referencial_Source</name>
        <label>Get Referencial Source</label>
        <locationX>1726</locationX>
        <locationY>98</locationY>
        <actionName>IV_GetValueFromMapRecord</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Set_QuoteSource</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>U__outputValue</typeName>
            <typeValue>Referencial__c</typeValue>
        </dataTypeMappings>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>key</name>
            <value>
                <elementReference>Quote.source__c</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>flowMap</name>
            <value>
                <elementReference>Create_Referencial_Map.flowMap</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>57.0</apiVersion>
    <assignments>
        <name>Add_parent_to_list</name>
        <label>Add parent to list</label>
        <locationX>1676</locationX>
        <locationY>1316</locationY>
        <assignmentItems>
            <assignToReference>OrderLineItemList2</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>OrderLineItem_OPT</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>For_each_OrderLineItem_OPT</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_to_OLI_OPT_list</name>
        <label>Add to OLI OPT list</label>
        <locationX>809</locationX>
        <locationY>1306</locationY>
        <assignmentItems>
            <assignToReference>OrderLineItemListOPT</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>OrderLineItem_OPT</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>For_each_Option</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_to_OLI_PROD_list</name>
        <label>Add to OLI PROD list</label>
        <locationX>289</locationX>
        <locationY>658</locationY>
        <assignmentItems>
            <assignToReference>OrderLineItemList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>OrderLineItem_PROD</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>QuoteRemiseCompHT</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>QuoteLineRemiseCompHT</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_To_QLI_Ids_List</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_To_QLI_Ids_List</name>
        <label>Add To QLI_Ids List</label>
        <locationX>429</locationX>
        <locationY>559</locationY>
        <assignmentItems>
            <assignToReference>QLI_ID_List</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>QuoteLineItem.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>QLI_PBE_ID_List</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>QuoteLineItem.PricebookEntryId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>For_each_QuoteLineItem</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Warranty_Line_To_List</name>
        <label>Add Warranty Line To List</label>
        <locationX>1812</locationX>
        <locationY>1798</locationY>
        <assignmentItems>
            <assignToReference>WarrantiesList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>WarrantyLines</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>For_each_OrderLineItem</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>addAllOptionCodeToList</name>
        <label>addAllOptionCodeToList</label>
        <locationX>710</locationX>
        <locationY>846</locationY>
        <assignmentItems>
            <assignToReference>allOptionsCodeList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_On_All_option.Codeoption__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_On_All_option</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignIds</name>
        <label>Get ApprovalQueueId</label>
        <locationX>1439</locationX>
        <locationY>504</locationY>
        <assignmentItems>
            <assignToReference>queueIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Chantier.serviceEntity__r.queueId__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CircuitContratNotNull</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignMaxDate</name>
        <label>AssignMaxDate</label>
        <locationX>1868</locationX>
        <locationY>1000</locationY>
        <assignmentItems>
            <assignToReference>maxCustomerDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CustomerDateGMT</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>First_Customer</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Create_OrderLineItem_OPT</name>
        <label>Create OrderLineItem OPT</label>
        <locationX>510</locationX>
        <locationY>1215</locationY>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.Product2Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Product_OPT.outputValue.Product2Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.Quantity</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Option.Quantite__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.OrderId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>orderId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.PricebookEntryId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Product_OPT.outputValue.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Option.Libelleoption__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.reference__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Option.Codeoption__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.UnitPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Option.PrixunitaireHT__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.ListPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Product_OPT.outputValue.UnitPrice</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.TotalPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_QuoteLineItem.outputValue.TotalPrice</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.productType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Component</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.QuoteLineItemId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Option.ligneDevis__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.quoteOption__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Option.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.unit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_QuoteLineItem.outputValue.productUnit__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.pretaxAmount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Option.PrixHT__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.orderItemQuantity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Option.Quantite__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.StatutDeRevision__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>En cours de révision</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_to_OLI_OPT_list</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Create_OrderLineItem_PROD</name>
        <label>Create OrderLineItem PROD</label>
        <locationX>291</locationX>
        <locationY>499</locationY>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.Product2Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.Product2Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.Quantity</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.Quantity</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.OrderId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>orderId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.VATRate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.TVApourcentage__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.VATAmount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.prix_TVA_Ligne__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.PricebookEntryId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.PricebookEntryId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.productName__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.reference__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.productCode__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.UnitPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.PrixunitaireHTtarif__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.ListPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.PricebookEntry.UnitPrice</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.TotalPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.TotalTTCligneRemise__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.leaf__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.Nombredevantaux__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.height__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.Hauteur__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.width__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.Largeur__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.locationPrecision__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OLI_PrecisionsEmplacement</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.location__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OLI_Emplacement</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.QuoteLineItemId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.enseignDiscount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.Remise_Enseigne_HT__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.additionalDiscount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineRemiseCompHT</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.unit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.productUnit__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.amount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.TotalTTCligneRemise__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.pretaxAmount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.prixHTTarifRemise__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.orderItemQuantity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.Quantity</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.productType__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.productType__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_PROD.thermalCoefficients__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>QuoteLineItem.thermalCoefficients__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_to_OLI_PROD_list</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Create_REF_List_Filter</name>
        <label>Create REF List Filter</label>
        <locationX>1349</locationX>
        <locationY>336</locationY>
        <assignmentItems>
            <assignToReference>ReferencialListName</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Quote.modeFinancement__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ReferencialListName</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Quote.source__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_All_Referencial</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Création de la liste des valeurs à filtrer pour les RT</description>
        <name>Create_RT_List_Filter</name>
        <label>Create RT List Filter</label>
        <locationX>735</locationX>
        <locationY>305</locationY>
        <assignmentItems>
            <assignToReference>RecordTypeNameFilters</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>OrderWarranty</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RecordTypeNameFilters</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>AssetWarranty</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RecordTypeNameFilters</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>CustomerOrder</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_All_RecordType</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_OLI_Parent</name>
        <label>Define OLI Parent</label>
        <locationX>1822</locationX>
        <locationY>1233</locationY>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.parentOrderItem__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_OrderItemParent.outputValue.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OrderLineItem_OPT.StatutDeRevision__c</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>Add_parent_to_list</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>First_Costumer</name>
        <label>First Costumer</label>
        <locationX>1260</locationX>
        <locationY>1090</locationY>
        <assignmentItems>
            <assignToReference>firstCostumerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>isAccountOrContact</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>For_each_Signer</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SellerSigningDate</name>
        <label>SellerSigningDate</label>
        <locationX>1912</locationX>
        <locationY>741</locationY>
        <assignmentItems>
            <assignToReference>SellerDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SellerDateGMT</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SellerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Signer.Signea__User__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>For_each_Signer</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_FinancingMethod</name>
        <label>Set FinancingMethod</label>
        <locationX>1961</locationX>
        <locationY>248</locationY>
        <assignmentItems>
            <assignToReference>financingMethodId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Referencial_FinancingMethod.outputValue.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_CGV_by_ContractType</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_QuoteSource</name>
        <label>Set QuoteSource</label>
        <locationX>1846</locationX>
        <locationY>98</locationY>
        <assignmentItems>
            <assignToReference>quoteSourceId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Referencial_Source.outputValue.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Referencial_FinancingMethod</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_RecordType_Asset</name>
        <label>Set RecordType Entitlement Asset</label>
        <locationX>1362</locationX>
        <locationY>76</locationY>
        <assignmentItems>
            <assignToReference>recordType_Entitlement_AssetId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RecordType.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>For_each_RecordType</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_RecordType_Entitlement_Contrat</name>
        <label>Set RecordType Entitlement Contrat</label>
        <locationX>1500</locationX>
        <locationY>74</locationY>
        <assignmentItems>
            <assignToReference>recordType_Entitlement_ContratId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RecordType.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>For_each_RecordType</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_RecordType_Order</name>
        <label>Set RecordType Order CustomerOrder</label>
        <locationX>1171</locationX>
        <locationY>42</locationY>
        <assignmentItems>
            <assignToReference>recordType_Order_CustomerOrderId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RecordType.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>For_each_RecordType</targetReference>
        </connector>
    </assignments>
    <decisions>
        <description>Vérifie si la formule de calcul de la CGV est OK</description>
        <name>Check_CGV_by_ContractType</name>
        <label>Check CGV by ContractType</label>
        <locationX>1867</locationX>
        <locationY>361</locationY>
        <defaultConnector>
            <targetReference>Get_Account</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Résultat par défaut</defaultConnectorLabel>
        <rules>
            <name>CGV_Defined</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CGVtext</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_CGV</targetReference>
            </connector>
            <label>CGV Defined</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_WarrantiesList</name>
        <label>Check if WarrantiesList</label>
        <locationX>1441</locationX>
        <locationY>1878</locationY>
        <defaultConnectorLabel>Résultat par défaut</defaultConnectorLabel>
        <rules>
            <name>WarrantiesList_OK</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>WarrantiesList</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Warranties_Records</targetReference>
            </connector>
            <label>WarrantiesList OK</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_OLI_Carpentry</name>
        <label>Check OLI Carpentry</label>
        <locationX>1622</locationX>
        <locationY>1571</locationY>
        <defaultConnector>
            <targetReference>For_each_OrderLineItem</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Résultat par défaut</defaultConnectorLabel>
        <rules>
            <name>is_Carpentry</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>OrderLineItem_PROD.productType__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Carpentry</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Warranty_Lines_by_Order_Lines</targetReference>
            </connector>
            <label>is Carpentry</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_RecordType</name>
        <label>Check RecordType</label>
        <locationX>1170</locationX>
        <locationY>244</locationY>
        <defaultConnector>
            <targetReference>For_each_RecordType</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Résultat par défaut</defaultConnectorLabel>
        <rules>
            <name>isContractWarranty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>OrderWarranty</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>RecordType.SobjectType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Entitlement</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_RecordType_Entitlement_Contrat</targetReference>
            </connector>
            <label>ContractWarranty</label>
        </rules>
        <rules>
            <name>isAssetWarranty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AssetWarranty</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>RecordType.SobjectType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Entitlement</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_RecordType_Asset</targetReference>
            </connector>
            <label>AssetWarranty</label>
        </rules>
        <rules>
            <name>CustomerOrder</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>CustomerOrder</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>RecordType.SobjectType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Order</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_RecordType_Order</targetReference>
            </connector>
            <label>CustomerOrder</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_WarrantyLines</name>
        <label>Check WarrantyLines</label>
        <locationX>1871</locationX>
        <locationY>1679</locationY>
        <defaultConnector>
            <targetReference>For_each_OrderLineItem</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Résultat par défaut</defaultConnectorLabel>
        <rules>
            <name>WarrantyLines_OK</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>WarrantyLines</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_Warranty_Line_To_List</targetReference>
            </connector>
            <label>WarrantyLines OK</label>
        </rules>
    </decisions>
    <decisions>
        <name>CircuitContratNotNull</name>
        <label>isCircuitContratNull</label>
        <locationX>1329</locationX>
        <locationY>506</locationY>
        <defaultConnector>
            <targetReference>getSigner</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>CircuitContratNull</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Quote.circuitSignatureContrat__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Order</targetReference>
            </connector>
            <label>CircuitContratNull</label>
        </rules>
    </decisions>
    <decisions>
        <name>Costumer_or_Seller</name>
        <label>Costumer or Seller</label>
        <locationX>1672</locationX>
        <locationY>762</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>isCostumer</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Signer.Signea__Position__c</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>2.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Max_Date</targetReference>
            </connector>
            <label>isCostumer</label>
        </rules>
        <rules>
            <name>isSeller</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Signer.Signea__Position__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SellerSigningDate</targetReference>
            </connector>
            <label>isSeller</label>
        </rules>
    </decisions>
    <decisions>
        <name>Debug</name>
        <label>Debug</label>
        <locationX>409</locationX>
        <locationY>310</locationY>
        <defaultConnector>
            <targetReference>Create_RT_List_Filter</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Résultat par défaut</defaultConnectorLabel>
        <rules>
            <name>IsDebug</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>QuoteId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Quote</targetReference>
            </connector>
            <label>IsDebug</label>
        </rules>
    </decisions>
    <decisions>
        <name>First_Customer</name>
        <label>First Customer</label>
        <locationX>1501</locationX>
        <locationY>1003</locationY>
        <defaultConnector>
            <targetReference>For_each_Signer</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>isFirstCostumer</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Signer.Signea__Position__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>2.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>First_Costumer</targetReference>
            </connector>
            <label>isFirstCostumer</label>
        </rules>
    </decisions>
    <decisions>
        <name>get_Max_Date</name>
        <label>get Max Date</label>
        <locationX>1636</locationX>
        <locationY>927</locationY>
        <defaultConnector>
            <targetReference>First_Customer</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>DateIsGreater</name>
            <conditionLogic>1 OR 2</conditionLogic>
            <conditions>
                <leftValueReference>Signer.Signea__consent_date__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>maxCustomerDate</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>maxCustomerDate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignMaxDate</targetReference>
            </connector>
            <label>DateIsGreater</label>
        </rules>
    </decisions>
    <description>Flux exécuté lors de la vente d&apos;un devis pour création automatique de la commande</description>
    <formulas>
        <description>Nom de la CGV à utiliser selon le type du contrat</description>
        <name>CGVtext</name>
        <dataType>String</dataType>
        <expression>IF(TEXT({!Quote.typeContrat__c}) == &quot;Menuiseries (Standard)&quot;, &quot;CGV-0001&quot;, 
			IF(TEXT({!Quote.typeContrat__c}) == &quot;Menuiseries (Foires et Salons)&quot;, &quot;CGV-0002&quot;, 
						IF(TEXT({!Quote.typeContrat__c}) == &quot;Isolation (Standard)&quot;, &quot;CGV-0003&quot;, 
									IF(TEXT({!Quote.typeContrat__c}) == &quot;Isolation (Foires et Salons)&quot;, &quot;CGV-0004&quot;, &quot;&quot;)
									)
						)
			)</expression>
    </formulas>
    <formulas>
        <name>CompanySigningDate</name>
        <dataType>Date</dataType>
        <expression>IF(ISBLANK({!Quote.circuitSignatureContrat__c}), null, {!SellerDate})</expression>
    </formulas>
    <formulas>
        <name>CompanySigningId</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!Quote.circuitSignatureContrat__c}), null, {!SellerId})</expression>
    </formulas>
    <formulas>
        <name>CostumerSigner</name>
        <dataType>String</dataType>
        <expression>IF(ISBLANK({!Quote.circuitSignatureContrat__c}), {!Get_Account.PersonContactId}, {!firstCostumerId})</expression>
    </formulas>
    <formulas>
        <name>CustomerDateGMT</name>
        <dataType>Date</dataType>
        <expression>{!Signer.Signea__consent_date__c} + (1/24)</expression>
    </formulas>
    <formulas>
        <name>ecartCotationSign</name>
        <dataType>Number</dataType>
        <expression>IF(ISNULL({!Quote.RemisevendeurglobaleFormule__c}),
null, 
-1 * {!Quote.RemisevendeurglobaleFormule__c}
)</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>isAccountOrContact</name>
        <dataType>String</dataType>
        <expression>IF({!Signer.Signea__Account__c} != null, {!Signer.Signea__Account__r.PersonContactId}, {!Signer.Signea__Contact__c})</expression>
    </formulas>
    <formulas>
        <name>maxCustomerSellerDate</name>
        <dataType>Date</dataType>
        <expression>IF({!Quote.circuitSignatureContrat__c} == null, {!Quote.dateAcceptationClient__c},IF({!maxSignerDate} &gt;= {!SellerDate}, {!maxSignerDate}, {!SellerDate}))</expression>
    </formulas>
    <formulas>
        <name>maxSignerDate</name>
        <dataType>Date</dataType>
        <expression>IF(ISBLANK({!Quote.circuitSignatureContrat__c}), {!Quote.dateAcceptationClient__c}, {!maxCustomerDate})</expression>
    </formulas>
    <formulas>
        <name>OLI_Emplacement</name>
        <dataType>String</dataType>
        <expression>IF(CONTAINS(LOWER( {!QuoteLineItem.Emplacement__c} ), &quot;entrée&quot;), &quot;Entrée&quot;,
IF(CONTAINS(LOWER( {!QuoteLineItem.Emplacement__c} ), &quot;salon&quot;), &quot;Salon&quot;,
IF(CONTAINS(LOWER( {!QuoteLineItem.Emplacement__c} ), &quot;cuisine&quot;), &quot;Cuisine&quot;,
IF(CONTAINS(LOWER( {!QuoteLineItem.Emplacement__c} ), &quot;chambre&quot;), &quot;Chambre&quot;, &quot;Autre&quot;)
)
)
)</expression>
    </formulas>
    <formulas>
        <name>OLI_PrecisionsEmplacement</name>
        <dataType>String</dataType>
        <expression>IF(CONTAINS(LOWER( {!QuoteLineItem.Emplacement__c} ), &quot;entrée&quot;), SUBSTITUTE( {!QuoteLineItem.Emplacement__c},  &quot;entrée&quot;, &quot;&quot; ),
IF(CONTAINS(LOWER( {!QuoteLineItem.Emplacement__c} ), &quot;salon&quot;), SUBSTITUTE( {!QuoteLineItem.Emplacement__c},  &quot;salon&quot;, &quot;&quot; ),
IF(CONTAINS(LOWER( {!QuoteLineItem.Emplacement__c} ), &quot;cuisine&quot;), SUBSTITUTE( {!QuoteLineItem.Emplacement__c},  &quot;cuisine&quot;, &quot;&quot; ),
IF(CONTAINS(LOWER( {!QuoteLineItem.Emplacement__c} ), &quot;chambre&quot;), SUBSTITUTE( {!QuoteLineItem.Emplacement__c},  &quot;chambre&quot;, &quot;&quot; ), {!QuoteLineItem.Emplacement__c})
)
)
)</expression>
    </formulas>
    <formulas>
        <name>QuoteLineRemiseCompHT</name>
        <dataType>Currency</dataType>
        <expression>{!QuoteLineItem.remiseUnitaire__c} * {!QuoteLineItem.Quantity}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>SellerDateGMT</name>
        <dataType>Date</dataType>
        <expression>{!Signer.Signea__consent_date__c} + (1/24)</expression>
    </formulas>
    <interviewLabel>Création Commande Automatique {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Order (Customer) - Création Commande Automatique</label>
    <loops>
        <name>For_each_Option</name>
        <label>For each Option</label>
        <locationX>1036</locationX>
        <locationY>1222</locationY>
        <assignNextValueToReference>Option</assignNextValueToReference>
        <collectionReference>OptionList</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Get_QuoteLineItem</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_OrderLineItem_Parent</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>For_each_OrderLineItem</name>
        <label>For each OrderLineItem</label>
        <locationX>1448</locationX>
        <locationY>1687</locationY>
        <assignNextValueToReference>OrderLineItem_PROD</assignNextValueToReference>
        <collectionReference>OrderLineItemList</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_OLI_Carpentry</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Check_if_WarrantiesList</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Boucle sur les CLI pour trouver les parents des OLI Component</description>
        <name>For_each_OrderLineItem_OPT</name>
        <label>For each OrderLineItem OPT</label>
        <locationX>1446</locationX>
        <locationY>1253</locationY>
        <assignNextValueToReference>OrderLineItem_OPT</assignNextValueToReference>
        <collectionReference>OrderLineItemListOPT</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Get_OrderItemParent</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_OLI_Parent</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>For_each_QuoteLineItem</name>
        <label>For each QuoteLineItem</label>
        <locationX>700</locationX>
        <locationY>503</locationY>
        <assignNextValueToReference>QuoteLineItem</assignNextValueToReference>
        <collectionReference>QuoteLineItemList</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Create_OrderLineItem_PROD</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_Order_RemCompl</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>For_each_RecordType</name>
        <label>For each RecordType</label>
        <locationX>965</locationX>
        <locationY>305</locationY>
        <assignNextValueToReference>RecordType</assignNextValueToReference>
        <collectionReference>RecordTypesList</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_RecordType</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_REF_List_Filter</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>For_each_Signer</name>
        <label>For each Signer</label>
        <locationX>1260</locationX>
        <locationY>819</locationY>
        <assignNextValueToReference>Signer</assignNextValueToReference>
        <collectionReference>getSigner</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Costumer_or_Seller</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Order</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_On_All_option</name>
        <label>Loop On All option</label>
        <locationX>978</locationX>
        <locationY>717</locationY>
        <collectionReference>OptionList</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>addAllOptionCodeToList</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_All_Product</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Order</name>
        <label>Create Order</label>
        <locationX>1126</locationX>
        <locationY>502</locationY>
        <assignRecordIdToReference>orderId</assignRecordIdToReference>
        <connector>
            <targetReference>Get_QuoteLineItems</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>Quote.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillToContactId</field>
            <value>
                <elementReference>Quote.compte__r.PersonContactId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingCity</field>
            <value>
                <elementReference>Quote.BillingCity</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingCountry</field>
            <value>
                <elementReference>Quote.BillingCountry</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingGeocodeAccuracy</field>
            <value>
                <elementReference>Quote.BillingGeocodeAccuracy</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingLatitude</field>
            <value>
                <elementReference>Quote.BillingLatitude</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingLongitude</field>
            <value>
                <elementReference>Quote.BillingLongitude</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingPostalCode</field>
            <value>
                <elementReference>Quote.BillingPostalCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingState</field>
            <value>
                <elementReference>Quote.BillingState</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingStreet</field>
            <value>
                <elementReference>Quote.BillingStreet</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>EffectiveDate</field>
            <value>
                <elementReference>maxCustomerSellerDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OpportunityId</field>
            <value>
                <elementReference>Quote.OpportunityId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>Quote.Opportunity.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Pricebook2Id</field>
            <value>
                <elementReference>Quote.Pricebook2Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>QuoteId</field>
            <value>
                <elementReference>Quote.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>recordType_Order_CustomerOrderId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShipToContactId</field>
            <value>
                <elementReference>Get_Chantier.proprietaire__r.PersonContactId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingCity</field>
            <value>
                <elementReference>Quote.ShippingCity</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingCountry</field>
            <value>
                <elementReference>Quote.ShippingCountry</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingGeocodeAccuracy</field>
            <value>
                <elementReference>Quote.ShippingGeocodeAccuracy</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingLatitude</field>
            <value>
                <elementReference>Quote.ShippingLatitude</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingLongitude</field>
            <value>
                <elementReference>Quote.ShippingLongitude</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingPostalCode</field>
            <value>
                <elementReference>Quote.ShippingPostalCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingState</field>
            <value>
                <elementReference>Quote.ShippingState</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingStreet</field>
            <value>
                <elementReference>Quote.ShippingStreet</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Registered</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>chantier__c</field>
            <value>
                <elementReference>chantierId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>companySignedDate__c</field>
            <value>
                <elementReference>CompanySigningDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>companySigned__c</field>
            <value>
                <elementReference>SellerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>customerSignedDate__c</field>
            <value>
                <elementReference>maxSignerDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>customerSigned__c</field>
            <value>
                <elementReference>Get_Account.PersonContactId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ensignDiscount__c</field>
            <value>
                <elementReference>Quote.Remise_Enseigne_Options__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>financingMethod__c</field>
            <value>
                <elementReference>financingMethodId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>headOfficeDiscountPercent__c</field>
            <value>
                <elementReference>Quote.headOfficeDiscountPercent__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>headOfficeDiscount__c</field>
            <value>
                <elementReference>Quote.headOfficeDiscount__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>initialAdditionalDiscountPercent__c</field>
            <value>
                <elementReference>ecartCotationSign</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>maxCommercialDelay__c</field>
            <value>
                <elementReference>Quote.delaiInstallationMax__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>minCommercialDelay__c</field>
            <value>
                <elementReference>Quote.delaiInstallationMin__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>salesEntity__c</field>
            <value>
                <elementReference>Get_Chantier.salesEntity__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>serviceEntity__c</field>
            <value>
                <elementReference>Get_Chantier.serviceEntity__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>source__c</field>
            <value>
                <elementReference>quoteSourceId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>termsAndConditions__c</field>
            <value>
                <elementReference>cgvId</elementReference>
            </value>
        </inputAssignments>
        <object>Order</object>
    </recordCreates>
    <recordCreates>
        <name>Create_OrderLineItem_Parent</name>
        <label>Create OrderLineItem Parent</label>
        <locationX>1105</locationX>
        <locationY>1391</locationY>
        <connector>
            <targetReference>Create_OrderLineItem_Records_0</targetReference>
        </connector>
        <inputReference>OrderLineItemList</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_OrderLineItem_Records_0</name>
        <label>Create OrderLineItem Records</label>
        <locationX>1239</locationX>
        <locationY>1391</locationY>
        <connector>
            <targetReference>Create_OrderItem_QuoteLine_Map</targetReference>
        </connector>
        <inputReference>OrderLineItemListOPT</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_Warranties_Records</name>
        <label>Create Warranties Records</label>
        <locationX>1596</locationX>
        <locationY>1876</locationY>
        <inputReference>WarrantiesList</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Account</name>
        <label>Get Account</label>
        <locationX>1747</locationX>
        <locationY>504</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Opportunity</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Quote.AccountId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Account</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>PersonContactId</queriedFields>
        <queriedFields>PersonTitle</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_All_Product</name>
        <label>Get All Product</label>
        <locationX>1035</locationX>
        <locationY>917</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_Product_Map</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>Id</field>
            <operator>In</operator>
            <value>
                <elementReference>QLI_PBE_ID_List</elementReference>
            </value>
        </filters>
        <filters>
            <field>ProductCode</field>
            <operator>In</operator>
            <value>
                <elementReference>allOptionsCodeList</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>PricebookEntry</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_CGV</name>
        <label>Get CGV</label>
        <locationX>1871</locationX>
        <locationY>504</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Account</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>KparKReference__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CGVtext</elementReference>
            </value>
        </filters>
        <object>Referencial__c</object>
        <outputAssignments>
            <assignToReference>cgvId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Chantier</name>
        <label>Get Chantier</label>
        <locationX>1532</locationX>
        <locationY>504</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>AssignIds</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>chantierId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Chantier__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>salesEntity__c</queriedFields>
        <queriedFields>serviceEntity__c</queriedFields>
        <queriedFields>owner__c</queriedFields>
        <queriedFields>proprietaire__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Opportunity</name>
        <label>Get Opportunity</label>
        <locationX>1636</locationX>
        <locationY>504</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Chantier</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Quote.OpportunityId</elementReference>
            </value>
        </filters>
        <object>Opportunity</object>
        <outputAssignments>
            <assignToReference>chantierId</assignToReference>
            <field>chantier__c</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Quote</name>
        <label>Get Quote</label>
        <locationX>508</locationX>
        <locationY>184</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_RT_List_Filter</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>QuoteId</elementReference>
            </value>
        </filters>
        <object>Quote</object>
        <outputReference>Quote</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>AccountId</queriedFields>
        <queriedFields>BillingCity</queriedFields>
        <queriedFields>BillingCountry</queriedFields>
        <queriedFields>BillingGeocodeAccuracy</queriedFields>
        <queriedFields>BillingLatitude</queriedFields>
        <queriedFields>BillingLongitude</queriedFields>
        <queriedFields>BillingPostalCode</queriedFields>
        <queriedFields>BillingState</queriedFields>
        <queriedFields>BillingStreet</queriedFields>
        <queriedFields>dateAcceptationClient__c</queriedFields>
        <queriedFields>OwnerId</queriedFields>
        <queriedFields>ShippingCity</queriedFields>
        <queriedFields>ShippingCountry</queriedFields>
        <queriedFields>ShippingGeocodeAccuracy</queriedFields>
        <queriedFields>ShippingLatitude</queriedFields>
        <queriedFields>ShippingLongitude</queriedFields>
        <queriedFields>ShippingPostalCode</queriedFields>
        <queriedFields>ShippingState</queriedFields>
        <queriedFields>ShippingStreet</queriedFields>
        <queriedFields>Pricebook2Id</queriedFields>
        <queriedFields>modeFinancement__c</queriedFields>
        <queriedFields>source__c</queriedFields>
        <queriedFields>OpportunityId</queriedFields>
        <queriedFields>TVA__c</queriedFields>
        <queriedFields>circuitSignatureContrat__c</queriedFields>
        <queriedFields>compte__c</queriedFields>
        <queriedFields>typeContrat__c</queriedFields>
        <queriedFields>delaiInstallationMax__c</queriedFields>
        <queriedFields>delaiInstallationMin__c</queriedFields>
        <queriedFields>RemisevendeurglobaleDeviseFormule__c</queriedFields>
        <queriedFields>Remise_Enseigne_Options__c</queriedFields>
        <queriedFields>TotalTTClignes__c</queriedFields>
        <queriedFields>Total_TTC_devis__c</queriedFields>
        <queriedFields>headOfficeDiscountPercent__c</queriedFields>
        <queriedFields>headOfficeDiscount__c</queriedFields>
        <queriedFields>RemisevendeurglobaleFormule__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <description>Récupération des lignes du devis</description>
        <name>Get_QuoteLineItems</name>
        <label>Get QuoteLineItems</label>
        <locationX>983</locationX>
        <locationY>502</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_QuoteLineItem_Map</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>QuoteId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Quote.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>cancelledLine__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <object>QuoteLineItem</object>
        <outputReference>QuoteLineItemList</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Product2Id</queriedFields>
        <queriedFields>Quantity</queriedFields>
        <queriedFields>UnitPrice</queriedFields>
        <queriedFields>ListPrice</queriedFields>
        <queriedFields>Discount</queriedFields>
        <queriedFields>TotalTTCligne__c</queriedFields>
        <queriedFields>Nombredevantaux__c</queriedFields>
        <queriedFields>Hauteur__c</queriedFields>
        <queriedFields>Largeur__c</queriedFields>
        <queriedFields>Emplacement__c</queriedFields>
        <queriedFields>PricebookEntryId</queriedFields>
        <queriedFields>Subtotal</queriedFields>
        <queriedFields>productName__c</queriedFields>
        <queriedFields>productCode__c</queriedFields>
        <queriedFields>TVApourcentage__c</queriedFields>
        <queriedFields>Prix_TVA__c</queriedFields>
        <queriedFields>TotalPrice</queriedFields>
        <queriedFields>PrixTTCtarif__c</queriedFields>
        <queriedFields>Remise_Enseigne_HT__c</queriedFields>
        <queriedFields>remiseUnitaire__c</queriedFields>
        <queriedFields>productUnit__c</queriedFields>
        <queriedFields>TotalTTCligneRemise__c</queriedFields>
        <queriedFields>prixHTTarifRemise__c</queriedFields>
        <queriedFields>prix_TVA_Ligne__c</queriedFields>
        <queriedFields>PrixunitaireHTtarif__c</queriedFields>
        <queriedFields>productType__c</queriedFields>
        <queriedFields>thermalCoefficients__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>getSigner</name>
        <label>getSigner</label>
        <locationX>1384</locationX>
        <locationY>687</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>For_each_Signer</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Signea__Circuit__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Quote.circuitSignatureContrat__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Signea__Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Signed</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Signea__Signer__c</object>
        <sortField>LastModifiedDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_OLI_Parent</name>
        <label>Update OLI Parent</label>
        <locationX>1448</locationX>
        <locationY>1427</locationY>
        <connector>
            <targetReference>For_each_OrderLineItem</targetReference>
        </connector>
        <inputReference>OrderLineItemList2</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Order_RemCompl</name>
        <label>Update Order RemCompl</label>
        <locationX>546</locationX>
        <locationY>706</locationY>
        <connector>
            <targetReference>Get_All_Options</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>orderId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>additionalDiscount__c</field>
            <value>
                <elementReference>QuoteRemiseCompHT</elementReference>
            </value>
        </inputAssignments>
        <object>Order</object>
    </recordUpdates>
    <start>
        <locationX>50</locationX>
        <locationY>290</locationY>
        <connector>
            <targetReference>Debug</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>Create_Warranty_Lines_by_Order_Lines</name>
        <label>Create Warranty Lines by Order Lines</label>
        <locationX>1807</locationX>
        <locationY>1563</locationY>
        <connector>
            <targetReference>Check_WarrantyLines</targetReference>
        </connector>
        <flowName>Entitlement_Commande_Client_Actif_Creation</flowName>
        <inputAssignments>
            <name>accountId</name>
            <value>
                <elementReference>Quote.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>OrderItem</name>
            <value>
                <elementReference>OrderLineItem_PROD</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>recordTypeGarantieAssetId</name>
            <value>
                <elementReference>recordType_Entitlement_AssetId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>recordTypeGarantieContratId</name>
            <value>
                <elementReference>recordType_Entitlement_ContratId</elementReference>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>WarrantyLines</assignToReference>
            <name>GarantieList</name>
        </outputAssignments>
    </subflows>
    <variables>
        <name>actualLoopedOption</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Option__c</objectType>
    </variables>
    <variables>
        <name>allOptionsCodeList</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>cgvId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>chantierId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>financingMethodId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>firstCostumerId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>maxCustomerDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Option</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Option__c</objectType>
    </variables>
    <variables>
        <name>OptionList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Option__c</objectType>
    </variables>
    <variables>
        <description>Id de la Commande</description>
        <name>orderId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>OrderLineItem_OPT</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>OrderLineItem_PROD</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>OrderLineItemList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>OrderLineItemList2</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>OrderLineItemListOPT</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>QLI_ID_List</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>QLI_PBE_ID_List</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>queueIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Devis</description>
        <name>Quote</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Quote</objectType>
    </variables>
    <variables>
        <name>QuoteId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>QuoteLineItem</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>QuoteLineItem</objectType>
    </variables>
    <variables>
        <name>QuoteLineItemList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>QuoteLineItem</objectType>
    </variables>
    <variables>
        <name>QuoteRemiseCompHT</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>quoteSourceId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RecordType</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>RecordType</objectType>
    </variables>
    <variables>
        <name>recordType_Entitlement_AssetId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordType_Entitlement_ContratId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordType_Order_CustomerOrderId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RecordTypeNameFilters</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Liste des types d&apos;enregistrement</description>
        <name>RecordTypesList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>RecordType</objectType>
    </variables>
    <variables>
        <name>Referencial</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Referencial__c</objectType>
    </variables>
    <variables>
        <name>ReferencialList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Referencial__c</objectType>
    </variables>
    <variables>
        <name>ReferencialListName</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SellerDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SellerId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Signer</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Signea__Signer__c</objectType>
    </variables>
    <variables>
        <name>WarrantiesList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Entitlement</objectType>
    </variables>
    <variables>
        <name>WarrantyLine</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Entitlement</objectType>
    </variables>
    <variables>
        <name>WarrantyLines</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Entitlement</objectType>
    </variables>
</Flow>
